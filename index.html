<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Recuerdos de la Abejita ğŸ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css"> 
    <style>
        /* Estilos CSS mÃ­nimos para el funcionamiento instantÃ¡neo */
        .file-input-wrapper { display: block; width: 100%; margin-bottom: 8px; position: relative; overflow: hidden; }
        .file-input-wrapper input[type=file] { position: absolute; left: 0; top: 0; opacity: 0; cursor: pointer; height: 100%; width: 100%; }
        #guest-file-photo, #guest-file-video { display: none; }
        
        /* ğŸš¨ FALLBACK CRÃTICO: Asegurar que el menÃº estÃ© oculto por defecto */
        #juegos-dropdown {
            display: none; /* Asegura que no se muestre al cargar */
        }
        .hidden-dropdown {
            display: none !important;
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <div class="portal-container" style="position: relative;"> 
        <header class="mb-6">
            <p class="text-xs text-gray-500 uppercase font-semibold">Â¡Bienvenido a la Colmena!</p>
            <h1>Portal de Recuerdos ğŸ¯</h1>
            <p class="text-gray-600 mt-2">Deja un mensaje, una foto o video capturado.</p>
        </header>

        <button id="menu-juegos-toggle" class="btn-menu-toggle">
            <span class="mr-3 text-2xl">ğŸ•¹ï¸</span>
            MENÃš DE JUEGOS
            <span class="ml-3 text-xl">â–¼</span>
        </button>

        <div id="juegos-dropdown" class="hidden-dropdown">
            <h3 class="text-xl font-black text-gray-800 mb-4 text-center">Â¡A Jugar!</h3>
            
            <div class="space-y-3">
                <a href="player.html" target="_blank" class="btn-portal btn-trivia juegos-dropdown-item">
                    <span class="mr-3 text-2xl">ğŸ</span>
                    Trivia del 1er AÃ±o
                </a>
                <a href="#" class="btn-portal bg-gray-400 text-gray-700 cursor-not-allowed">
                    <span class="mr-3 text-2xl">ğŸ‰</span>
                    PrÃ³ximamente...
                </a>
            </div>
            <button id="cerrar-menu" class="text-sm text-gray-600 hover:text-gray-800 mt-4 w-full">
                Cerrar
            </button>
        </div>


        <section class="p-4 rounded-xl border border-gray-200 bg-gray-50">
            <h2 class="text-xl font-bold mb-4 text-gray-800 flex items-center justify-center space-x-2">
                <span class="text-2xl">ğŸ’–</span>
                <span>Deja tu Recuerdo</span>
            </h2>

            <form id="memory-form" class="mb-6 space-y-3">
                <input type="text" id="guest-name" required placeholder="Tu Nombre" 
                       class="input-bee w-full p-3 border border-yellow-300 rounded-lg focus:ring-yellow-500 focus:border-yellow-500">
                
                <textarea id="guest-message" placeholder="Tu mensaje de texto (opcional)"
                          class="textarea-bee w-full p-3 border border-yellow-300 rounded-lg focus:ring-yellow-500 focus:border-yellow-500 h-16 resize-none"></textarea>

                
                <div class="flex flex-col items-center space-y-2">
                    
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 w-full"> 
                        
                        <div class="file-input-wrapper w-full sm:w-1/2">
                            <label for="guest-file-photo" class="btn-file-label">
                                <span class="mr-1">ğŸ“¸</span> Capturar Foto
                            </label>
                            <input type="file" id="guest-file-photo" 
                                   accept="image/*" 
                                   capture="camera"> 
                        </div>
                        
                        <div class="file-input-wrapper w-full sm:w-1/2">
                            <label for="guest-file-video" class="btn-file-label">
                                <span class="mr-1">ğŸ¥</span> Grabar Video
                            </label>
                            <input type="file" id="guest-file-video" 
                                   accept="video/*" 
                                   capture="camcorder"> 
                        </div>
                    </div>
                           
                    <p id="file-name-display" class="text-sm text-gray-600 italic mt-2"></p>
                </div>


                <div id="upload-progress-bar-container" class="hidden">
                    <p id="upload-status" class="text-xs text-gray-600 mb-1 text-left">Subiendo...</p>
                    <div id="upload-progress-bar"><div id="upload-progress"></div></div>
                </div>

                <button type="submit" id="submit-memory-btn" class="btn-portal btn-messages h-12 mt-4">
                    Enviar Recuerdo ğŸ
                </button>
            </form>

            <h3 class="text-lg font-bold mb-2 text-gray-700">Recuerdos de la Colmena</h3>
            <div id="memories-list" class="max-h-60 overflow-y-auto p-2 border border-dashed border-gray-300 rounded-lg bg-white">
                <p class="text-sm text-gray-500 italic">Cargando mensajes...</p>
            </div>
            
        </section>

    </div>

    <script type="module" src="portalScript.js"></script>
</body>
</html>
